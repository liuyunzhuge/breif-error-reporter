!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).EventReporter=n()}(this,function(){"use strict";function a(e,n){return Object.prototype.toString.call(e)==="[object "+(n||"Object")+"]"}function e(e,n){var t,o,r;o=!1,(t=document.createElement("script")).type="text/javascript",t.src=e,t.onload=t.onreadystatechange=function(){o||this.readyState&&"complete"!==this.readyState||(o=!0,a(n,"Function")&&n())},(r=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,r)}var s={vConsoleSrc:"//cdn.bootcss.com/vConsole/3.3.4/vconsole.min.js",maximumStackLines:20,resource:!0,vue:null,processStack:function(e){var n=e.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,s.maximumStackLines).join("@").replace(/\?[^:]+/gi,""),t=""+e;return~n.indexOf(t)||(n=t+"@"+n),n},onReport:function(){}},o=null,r=[],i=!0,l={setConfig:function(e){var c;Object.assign(s,e),c=window.onerror,window.onerror=function(e,n,t,o,r){var i=e;return r&&r.stack&&(i=s.processStack(r)),~e.toLowerCase().indexOf("script error")?console.error("Script Error: See Browser Console for Detail"):s.onReport.call(l,i),!!a(c,"Function")&&c.call(this,e,n,t,o,r)},s.resource&&window.addEventListener("error",function(e){if(a(e,"Event")&&(e.target instanceof HTMLScriptElement||e.target instanceof HTMLLinkElement||e.target instanceof HTMLImageElement)){var n=e.type?"--"+e.type+"--"+(e.target?e.target.tagName.toLowerCase()+"::"+e.target.src:""):"";s.onReport.call(l,n)}},!0),function(){if(s.vue){var o=s.vue.config.errorHandler;s.vue.config.errorHandler=function(e,n,t){return console.error(e),s.onReport.call(l,s.processStack(e)),a(o,"Function")&&o(e,n,t)}}}()},enableVConsole:function(t){if(o&&t)return function(){try{o&&o.show()}catch(e){}}();e(s.vConsoleSrc,function(){o=o||new VConsole({defaultPlugins:["system","network","element","storage"],maxLogNumber:5e3,onReady:function(){t&&setTimeout(function(){return o.show()},0)}}),i=!1;for(var e=r.length,n=0;n<e;n++)r[n].noOrigin=!0,o.pluginList.default.printLog(r[n]);r=[]})},loadScript:e,getSystemInfo:function(){var e=navigator.userAgent,n=e.match(/(ipod).*\s([\d_]+)/i),t=e.match(/(ipad).*\s([\d_]+)/i),o=e.match(/(iphone)\sos\s([\d_]+)/i),r=e.match(/(android)\s([\d\.]+)/i),i="Unknown",c="";r?(i="Android",c=r[2]):o?(i="iPhone",c="iOS"+o[2].replace(/_/g,".")):t?(i="iPad",c="iOS"+t[2].replace(/_/g,".")):n&&(i="iPod",c="iOS"+n[2].replace(/_/g,"."));var a=e.match(/MicroMessenger\/([\d\.]+)/i),s=!1,l="",u=!1;a&&a[1]&&(s=!0,l=a[1],"miniprogram"!==window.__wxjs_environment&&!/miniProgram/i.test(e)||(u=!0));var p=e.toLowerCase().match(/ nettype\/([^ ]+)/g),f="Unknown";return p&&p[0]&&(f=(p=p[0].split("/"))[1]),{system:i,systemVersion:c,netType:f,ua:e,wechat:s,wechatVersion:l,wechatMini:u}},getCookie:function(e){var n=encodeURIComponent(e).replace(/[-.+*]/g,"\\$&"),t=RegExp("(?:(?:^|.*;)\\s*".concat(n,"\\s*\\=\\s*([^;]*).*$)|^.*$"));return decodeURIComponent(document.cookie.replace(t,"$1"))||null}};return["log","info","warn","debug","error"].forEach(function(e){var n=console[e];console[e]=function(){return i&&r.push({logType:e,logs:arguments}),n.apply(console,arguments)}}),l});
