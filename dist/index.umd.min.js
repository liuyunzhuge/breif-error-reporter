!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).EventReporter=n()}(this,function(){"use strict";function c(e,n){return Object.prototype.toString.call(e)==="[object "+(n||"Object")+"]"}function e(e,n){var r,o,t;o=!1,(r=document.createElement("script")).type="text/javascript",r.src=e,r.onload=r.onreadystatechange=function(){o||this.readyState&&"complete"!==this.readyState||(o=!0,c(n,"Function")&&n())},(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(r,t)}function n(){if(d.vue){var o=d.vue.config.errorHandler;d.vue.config.errorHandler=function(e,n,r){return console.error(e),l(e,f.VUE),c(o,"Function")&&o(e,n,r)}}if(d.vueRouter&&d.vueRouter.onError(function(e){console.error(e),l(e,f.VUE_ROUTER)}),d.axios){var n=function(e,n){console.error(n);function r(e){return e=u(e),Promise.reject(e)}var o,t,i=d.axiosIgnore,a=n.config;if(i){if(c(i,"Array")&&i.some(function(e){return RegExp(e).test(a.url)}))return r(n);if(c(i,"Function")&&i(n))return r(n)}return l(n,e,(o=a,t={},(d.axiosReportConfig||["url","method","params","data","headers"]).forEach(function(e){t[e]=o[e]}),t)),r(n)};d.axios.interceptors.request.use(function(e){return e},function(e){return n(f.AXIOS_REQUEST,e)}),d.axios.interceptors.response.use(function(e){return e},function(e){return n(f.AXIOS_RESPONSE,e)})}}function s(n){if(!n)return!1;if(n instanceof Error){if(n.notToReport)return!0;if(d.notReportErrors.some(function(e){return n instanceof e}))return!0}return!1}function u(e){return e instanceof Error&&(e.notToReport=!0),e}function l(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=e;if(c(e,"String")&&(o=Error(e)),!s(o))return d.onReport.call(p,d.processStack(o),n||f.MANUAL,r)}function r(){}var f={RUNTIME:"runtime",RESOURCE:"resource",VUE:"vue",VUE_ROUTER:"vue-router",MANUAL:"manual",AXIOS_REQUEST:"axios-request",AXIOS_RESPONSE:"axios-response",UNHANDLED_REJECTION:"unhandledrejection"},d={vConsoleSrc:"//cdn.bootcss.com/vConsole/3.3.4/vconsole.min.js",maximumStackLines:20,resource:!0,unhandledRejection:!0,vue:null,vueRouter:null,axios:null,axiosReportConfig:null,axiosIgnore:null,notReportErrors:[],processStack:function(e){if(!e.stack)return""+e;var n=e.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,d.maximumStackLines).join("@").replace(/\?[^:]+/gi,""),r=""+e;return~n.indexOf(r)||(n=r+"@"+n),n},onReport:r,onResourceLoadError:r},o=null,t=[],i=!0,p={setConfig:function(e){var a;Object.assign(d,e),a=window.onerror,window.onerror=function(e,n,r,o,t){var i=e;if(!s(t))return t&&t.stack&&(i=d.processStack(t)),~e.toLowerCase().indexOf("script error")?console.error("Script Error: See Browser Console for Detail"):d.onReport.call(p,i,f.RUNTIME),!!c(a,"Function")&&a.call(this,e,n,r,o,t)},d.resource&&window.addEventListener("error",function(e){if(e.target&&(e.target instanceof HTMLScriptElement||e.target instanceof HTMLLinkElement||e.target instanceof HTMLImageElement)){var n="--"+e.type+"--"+e.target.tagName.toLowerCase()+"::"+(e.target.src||e.target.href);d.onResourceLoadError.call(p,e),d.onReport.call(p,n,f.RESOURCE)}},!0),n(),d.unhandledRejection&&window.addEventListener("unhandledrejection",function(e){void 0!==e.reason&&l(e.reason instanceof Error?e.reason:e.reason+"",f.UNHANDLED_REJECTION)})},enableVConsole:function(r){if(o&&r)return o.show();e(d.vConsoleSrc,function(){o=o||new VConsole({defaultPlugins:["system","network","element","storage"],maxLogNumber:5e3,onReady:function(){r&&setTimeout(function(){return o.show()},0)}}),i=!1;for(var e=t.length,n=0;n<e;n++)t[n].noOrigin=!0,o.pluginList.default.printLog(t[n]);t=[]})},loadScript:e,getSystemInfo:function(){var e=navigator.userAgent,n=e.match(/(ipod).*\s([\d_]+)/i),r=e.match(/(ipad).*\s([\d_]+)/i),o=e.match(/(iphone)\sos\s([\d_]+)/i),t=e.match(/(android)\s([\d\.]+)/i),i="Unknown",a="";t?(i="Android",a=t[2]):o?(i="iPhone",a="iOS"+o[2].replace(/_/g,".")):r?(i="iPad",a="iOS"+r[2].replace(/_/g,".")):n&&(i="iPod",a="iOS"+n[2].replace(/_/g,"."));var c=e.match(/MicroMessenger\/([\d\.]+)/i),s=!1,u="",l=!1;c&&c[1]&&(s=!0,u=c[1],"miniprogram"!==window.__wxjs_environment&&!/miniProgram/i.test(e)||(l=!0));var f=e.toLowerCase().match(/ nettype\/([^ ]+)/g),d="Unknown";return f&&f[0]&&(d=(f=f[0].split("/"))[1]),{system:i,systemVersion:a,netType:d,ua:e,wechat:s,wechatVersion:u,wechatMini:l}},getCookie:function(e){var n=encodeURIComponent(e).replace(/[-.+*]/g,"\\$&"),r=RegExp("(?:(?:^|.*;)\\s*".concat(n,"\\s*\\=\\s*([^;]*).*$)|^.*$"));return decodeURIComponent(document.cookie.replace(r,"$1"))||null},makeReport:l,wrapNotReport:u};return["log","info","warn","debug","error"].forEach(function(e){var n=console[e];console[e]=function(){return i&&t.push({logType:e,logs:arguments}),n.apply(console,arguments)}}),p});
