!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).EventReporter=n()}(this,function(){"use strict";function l(e,n){return Object.prototype.toString.call(e)==="[object "+(n||"Object")+"]"}function e(e,n){var t,o,r;o=!1,(t=document.createElement("script")).type="text/javascript",t.src=e,t.onload=t.onreadystatechange=function(){o||this.readyState&&"complete"!==this.readyState||(o=!0,l(n,"Function")&&n())},(r=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,r)}["log","info","warn","debug","error"].forEach(function(e){var n=console[e];console[e]=function(){return i&&r.push({logType:e,logs:arguments}),n.apply(console,arguments)}});var u={vConsoleSrc:"//cdn.bootcss.com/vConsole/3.3.4/vconsole.min.js",maximumStackLines:20,onReport:function(){}},o=null,r=[],i=!0;window.onerror=function(e,n,t,o,r){var i,c,a,s=e;return r&&r.stack&&(~(c=(i=r).stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,u.maximumStackLines).join("@").replace(/\?[^:]+/gi,"")).indexOf(a=""+i)||(c=a+"@"+c),s=c),l(s,"Event")&&(s+=s.type?"--"+s.type+"--"+(s.target?s.target.tagName+"::"+s.target.src:""):""),~e.toLowerCase().indexOf("script error")?console.error("Script Error: See Browser Console for Detail"):u.onReport.call(p,s),!1};var p={setConfig:function(e){Object.assign(u,e)},enableVConsole:function(t){if(o&&t)return function(){try{o&&o.show()}catch(e){}}();e(u.vConsoleSrc,function(){o=o||new VConsole({defaultPlugins:["system","network","element","storage"],maxLogNumber:5e3,onReady:function(){t&&setTimeout(function(){return o.show()},0)}}),i=!1;for(var e=r.length,n=0;n<e;n++)r[n].noOrigin=!0,o.pluginList.default.printLog(r[n]);r=[]})},loadScript:e,getSystemInfo:function(){var e=navigator.userAgent,n=e.match(/(ipod).*\s([\d_]+)/i),t=e.match(/(ipad).*\s([\d_]+)/i),o=e.match(/(iphone)\sos\s([\d_]+)/i),r=e.match(/(android)\s([\d\.]+)/i),i="Unknown",c="";r?(i="Android ",c=r[2]):o?(i="iPhone ",c="iOS"+o[2].replace(/_/g,".")):t?(i="iPad",c="iOS"+t[2].replace(/_/g,".")):n&&(i="iPod",c="iOS"+n[2].replace(/_/g,"."));var a=e.match(/MicroMessenger\/([\d\.]+)/i),s=!1,l="",u=!1;a&&a[1]&&(s=!0,l=a[1],"miniprogram"!==window.__wxjs_environment&&!/miniProgram/i.test(e)||(u=!0));var p=e.toLowerCase().match(/ nettype\/([^ ]+)/g),d="Unknown";return p&&p[0]&&(d=(p=p[0].split("/"))[1]),{system:i,systemVersion:c,netType:d,ua:e,wechat:s,wechatVersion:l,wechatMini:u}},getCookie:function(e){var n=encodeURIComponent(e).replace(/[-.+*]/g,"\\$&"),t=RegExp("(?:(?:^|.*;)\\s*".concat(n,"\\s*\\=\\s*([^;]*).*$)|^.*$"));return decodeURIComponent(document.cookie.replace(t,"$1"))||null}};return p});
